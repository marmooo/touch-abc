const uppers=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),lowers=Array.from("abcdefghijklmnopqrstuvwzyz");loadConfig();function loadConfig(){if(localStorage.getItem("darkMode")==1&&document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.getItem("touch-abc-level")){const a=parseInt(localStorage.getItem("touch-abc-level"));document.getElementById("levelOption").options[a].selected=!0}if(localStorage.getItem("furigana")==1){const a=document.getElementById("addFurigana");addFurigana(a),a.setAttribute("data-done",!0)}}function toggleDarkMode(){localStorage.getItem("darkMode")==1?(localStorage.setItem("darkMode",0),document.documentElement.setAttribute("data-bs-theme","light")):(localStorage.setItem("darkMode",1),document.documentElement.setAttribute("data-bs-theme","dark"))}function selectFontFromURL(){this.classList.add("disabled");const a=document.getElementById("fontURL").value;try{new URL(a),document.getElementById("fontLoadError").classList.add("d-none"),document.getElementById("fontLoading").classList.remove("d-none");const b=new FontFace("url",`url(${a})`);b.load().then(function(){document.fonts.add(b),localStorage.setItem("touch-abc-font",a),document.getElementById("selectedFont").style.fontFamily="url",document.getElementById("fontLoading").classList.add("d-none")})}catch{document.getElementById("fontLoadError").classList.remove("d-none")}this.classList.remove("disabled")}function selectFont(){const b=this.getAttribute("id"),a=b.replace(/-/g," ");localStorage.setItem("touch-abc-font",a),document.getElementById("selectedFont").style.fontFamily=a}function setFontSelector(){const b=document.getElementById("fontSelector").getElementsByClassName("carousel-item");[...b].forEach(b=>{const a=b.children[0],c=a.getAttribute("id"),d=c.replace(/-/g," ");a.style.fontFamily=d});let a=localStorage.getItem("touch-abc-font");a||(a="Aref Ruqaa"),document.getElementById("selectedFont").style.fontFamily=a,document.getElementById("fontURL").addEventListener("keydown",a=>{a.key=="Enter"&&selectFontFromURL(document.getElementById("fontURL"))})}function changeLevel(){const a=this.selectedIndex;localStorage.setItem("touch-abc-level",a)}function addFurigana(){const a=document.getElementById("addFurigana");a.getAttribute("data-done")?(localStorage.setItem("furigana",0),location.reload()):(import("https://marmooo.github.io/yomico/yomico.min.js").then(a=>{a.yomico("/touch-abc/index.yomi")}),localStorage.setItem("furigana",1),a.setAttribute("data-done",!0))}function setCleared(){const a=localStorage.getItem("touch-abc");if(a){const b=[...document.getElementById("problems").children];b.forEach(b=>{a.includes(b.textContent)&&(b.classList.remove("btn-outline-secondary"),b.classList.add("btn-secondary"))})}}function deleteData(){localStorage.removeItem("touch-abc"),location.reload()}function generateDrill(){const a=document.getElementById("search").value;a&&/^[a-zA-Z]+$/.test(a)&&(location.href=`/touch-abc/drill/?q=${a}`)}function setProblems(){let a="";const b=document.getElementById("problems"),c=uppers.concat(lowers);c.forEach(b=>{const c=b.repeat(6),d=`/touch-abc/drill/?q=${c}`,e="me-1 mb-1 btn btn-sm btn-outline-secondary";a+=`<a href="${d}" class="${e}">${b}</a>`}),b.innerHTML=a}setProblems(),setCleared(),setFontSelector();const fontsCarousel=document.getElementById("fontsCarousel");new bootstrap.Carousel(fontsCarousel),document.getElementById("toggleDarkMode").onclick=toggleDarkMode,document.getElementById("addFurigana").onclick=addFurigana,document.getElementById("generateDrill").onclick=generateDrill,document.getElementById("deleteData").onclick=deleteData,document.getElementById("selectFontFromURL").onclick=deleteData,[...fontsCarousel.getElementsByClassName("selectFont")].forEach(a=>{a.onclick=selectFont}),document.getElementById("levelOption").onchange=changeLevel,document.getElementById("search").addEventListener("keydown",a=>{if(a.key=="Enter"){const b=a.target.value;location.href=`/touch-abc/drill/?q=${b}`}},!1)
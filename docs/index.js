const uppers=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),lowers=Array.from("abcdefghijklmnopqrstuvwzyz");loadConfig();function loadConfig(){if(localStorage.getItem("darkMode")==1&&document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.getItem("touch-abc-level")){const e=parseInt(localStorage.getItem("touch-abc-level"));document.getElementById("levelOption").options[e].selected=!0}if(localStorage.getItem("furigana")==1){const e=document.getElementById("addFurigana");addFurigana(e),e.setAttribute("data-done",!0)}}function toggleDarkMode(){localStorage.getItem("darkMode")==1?(localStorage.setItem("darkMode",0),document.documentElement.setAttribute("data-bs-theme","light")):(localStorage.setItem("darkMode",1),document.documentElement.setAttribute("data-bs-theme","dark"))}function selectFontFromURL(){this.classList.add("disabled");const e=document.getElementById("fontURL").value;try{new URL(e),document.getElementById("fontLoadError").classList.add("d-none"),document.getElementById("fontLoading").classList.remove("d-none");const t=new FontFace("url",`url(${e})`);t.load().then(function(){document.fonts.add(t),localStorage.setItem("touch-abc-font",e),document.getElementById("selectedFont").style.fontFamily="url",document.getElementById("fontLoading").classList.add("d-none")})}catch{document.getElementById("fontLoadError").classList.remove("d-none")}this.classList.remove("disabled")}function selectFont(){const t=this.getAttribute("id"),e=t.replace(/-/g," ");localStorage.setItem("touch-abc-font",e),document.getElementById("selectedFont").style.fontFamily=e}function setFontSelector(){const t=document.getElementById("fontSelector").getElementsByClassName("carousel-item");[...t].forEach(e=>{const t=e.children[0],n=t.getAttribute("id"),s=n.replace(/-/g," ");t.style.fontFamily=s});let e=localStorage.getItem("touch-abc-font");e||(e="Aref Ruqaa"),document.getElementById("selectedFont").style.fontFamily=e,document.getElementById("fontURL").addEventListener("keydown",e=>{e.key=="Enter"&&selectFontFromURL(document.getElementById("fontURL"))})}function changeLevel(){const e=this.selectedIndex;localStorage.setItem("touch-abc-level",e)}function addFurigana(){const e=document.getElementById("addFurigana");e.getAttribute("data-done")?(localStorage.setItem("furigana",0),location.reload()):(import("https://marmooo.github.io/yomico/yomico.min.js").then(e=>{e.yomico("/touch-abc/index.yomi")}),localStorage.setItem("furigana",1),e.setAttribute("data-done",!0))}function setCleared(){const e=localStorage.getItem("touch-abc");if(e){const t=[...document.getElementById("problems").children];t.forEach(t=>{e.includes(t.textContent)&&(t.classList.remove("btn-outline-secondary"),t.classList.add("btn-secondary"))})}}function deleteData(){localStorage.removeItem("touch-abc"),location.reload()}function generateDrill(){const e=document.getElementById("search").value;e&&/^[a-zA-Z]+$/.test(e)&&(location.href=`/touch-abc/drill/?q=${e}`)}function setProblems(){let e="";const t=document.getElementById("problems"),n=uppers.concat(lowers);n.forEach(t=>{const n=t.repeat(6),s=`/touch-abc/drill/?q=${n}`,o="me-1 mb-1 btn btn-sm btn-outline-secondary";e+=`<a href="${s}" class="${o}">${t}</a>`}),t.innerHTML=e}setProblems(),setCleared(),setFontSelector();const fontsCarousel=document.getElementById("fontsCarousel");new bootstrap.Carousel(fontsCarousel),document.getElementById("toggleDarkMode").onclick=toggleDarkMode,document.getElementById("addFurigana").onclick=addFurigana,document.getElementById("generateDrill").onclick=generateDrill,document.getElementById("deleteData").onclick=deleteData,document.getElementById("selectFontFromURL").onclick=selectFontFromURL,[...fontsCarousel.getElementsByClassName("selectFont")].forEach(e=>{e.onclick=selectFont}),document.getElementById("levelOption").onchange=changeLevel,document.getElementById("search").addEventListener("keydown",e=>{if(e.key=="Enter"){const t=e.target.value;location.href=`/touch-abc/drill/?q=${t}`}},!1)